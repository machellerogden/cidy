kind: composition
config:
  git:
    depth: 1
    single-branch: true
spec:
  - '@rebind/name::docker.name'
  - deploy.select
  - '@bind/deploy.select.refspec::git.branch'
  - mktemp
  - '@bind/mktemp::git.directory'
  - '@bind/mktemp::docker.context'
  - git.clone
  - deploy.confirm
  - '@when/deploy.confirm.ready::docker.build' # not a huge fan of this syntax ... needs further consideration
  - docker.build
